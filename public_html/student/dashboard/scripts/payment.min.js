function initiatePayment(){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,didOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({title:"Loading your Payments...",timer:3e3,timerProgressBar:!0})}function processPaystackPayment(){const studentEmail=document.querySelector("#studentEmail").innerText,applicationCost=parseFloat(document.querySelector("#applicationCost").innerText.replace(/,/g,""));PaystackPop.setup({key:"pk_test_f0fd646f16ebd917af6bc8fb4ea2cdcb9b3b99c5",email:studentEmail,amount:100*applicationCost,currency:"GHS",callback:function(response){"success"===response.status&&recordPayment(response.reference,response.status)},onClose:function(){Swal.fire({icon:"error",title:"Payment Canceled",text:"Your payment has been canceled"})}}).openIframe()}function recordPayment(reference,paymentStatus){const studentEmail=document.querySelector("#studentEmail").innerText,applicationCost=parseFloat(document.querySelector("#applicationCost").innerText.replace(/,/g,"")),applicationId=document.querySelector("#application_id").innerText;fetch("../../../api/student/payment/pay.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:reference,paymentStatus:paymentStatus,studentEmail:studentEmail,applicationCost:applicationCost,applicationId:applicationId})}).then((response=>response.json())).then((data=>{"success"===data.status?Swal.fire({icon:"success",title:"Payment Successful",text:"Your payment has been recorded successfully!"}):Swal.fire({icon:"error",title:"Payment Failed",text:data.message||"An error occurred while processing your payment."})})).catch((error=>{console.error("Error:",error),Swal.fire({icon:"error",title:"Error",text:"Something went wrong. Please try again."})}))}