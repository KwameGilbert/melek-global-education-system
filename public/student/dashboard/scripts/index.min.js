function loadDashboard(){console.log("Dashboard loaded!");Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,didOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({title:"Loading your Dashboard...",timer:3e3,timerProgressBar:!0});const view_all_notices=document.getElementById("view-all-notices");view_all_notices.addEventListener("click",(function(event){event.preventDefault();const page=view_all_notices.getAttribute("data-page");localStorage.setItem("activePage",page),loadPage(page)})),fetch("../../../api/student/application/application.php").then((response=>response.json())).then((data=>{document.getElementById("applicant-id").innerText=data.applicantID,document.getElementById("application-status").innerText=data.applicationStatus,document.getElementById("payment-status").innerText=data.paymentStatus})).catch((error=>{console.error("Error fetching dashboard data:",error)})),fetch("../../../api/student/notice/notices.php").then((response=>response.json())).then((data=>{const noticesList=document.getElementById("notices-list");noticesList.innerText="",0!==data.length?data.forEach((notice=>{const noticeItem=document.createElement("div");noticeItem.classList.add("p-2","mb-2","bg-white","rounded","shadow");const message=document.createElement("p");message.innerText=notice.message;const date=document.createElement("small");date.classList.add("block","text-gray-500","text-sm"),date.innerText=`Posted on: ${notice.date}`,noticeItem.appendChild(message),noticeItem.appendChild(date),noticesList.appendChild(noticeItem)})):noticesList.innerText="No notices available"}))}function loadPayments(){console.log("Payments page loaded!");Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,didOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({title:"Loading your payments...",timer:3e3,timerProgressBar:!0}),document.getElementById("payment-method").addEventListener("change",(function(){const paymentMethod=document.getElementById("payment-method").value;document.querySelectorAll(".payment-form").forEach((form=>form.classList.add("hidden"))),paymentMethod&&document.getElementById(`${paymentMethod}-form`).classList.remove("hidden")}))}function loadProfile(){console.log("Profile page loaded!");Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,didOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({title:"Loading your Profile Page...",timer:3e3,timerProgressBar:!0}),initializeProfilePage()}function loadNoticesPage(){console.log("Updates page loaded!");function closeModal(){document.getElementById("notice-modal").classList.add("hidden")}Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,didOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({title:"Loading your Updates...",timer:3e3,timerProgressBar:!0}),document.getElementById("close-modal").onclick=closeModal,document.getElementById("notice-modal").onclick=event=>{event.target===event.currentTarget&&closeModal()},async function(){try{const response=await fetch("./api/notices.json");!function(notices){const noticesList=document.getElementById("notices-list");if(noticesList.innerHTML="",0===notices.length)return void(noticesList.innerHTML='<p class="text-gray-500 text-lg">No notices available</p>');notices.forEach((notice=>{const noticeItem=document.createElement("div");noticeItem.className="p-4 bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow cursor-pointer",noticeItem.innerHTML=`\n            <div class="flex justify-between items-center">\n                <h2 class="font-medium text-lg text-gray-800 truncate">${notice.title}</h2>\n                <span class="text-sm text-gray-500">${notice.date}</span>\n            </div>\n            <p class="text-gray-600 mt-1 truncate">${notice.message.substring(0,50)}...</p>\n        `,noticeItem.onclick=()=>function(notice){document.getElementById("modal-title").textContent=notice.title,document.getElementById("modal-message").textContent=notice.message,document.getElementById("modal-date").textContent=`Date: ${notice.date} | Time: ${notice.time}`;document.getElementById("notice-modal").classList.remove("hidden")}(notice),noticesList.appendChild(noticeItem)}))}(await response.json())}catch(error){console.error("Failed to load notices:",error)}}()}function loadPage(page){fetch(`./pages/${page}`).then((response=>response.text())).then((html=>{switch(document.getElementById("main-content").innerHTML=html,console.log(page),page){case"dashboard.html":loadDashboard();break;case"application.php":loadApplications();break;case"payments.html":loadPayments();break;case"profile.php":loadProfile();break;case"notices.html":loadNoticesPage();break;default:console.error("No matching function for the page:",page)}})).catch((error=>console.error("Error loading page:",error)))}async function logout(){try{(await fetch("../../../api/logout/logout.php",{method:"GET"})).ok?(Swal.fire({title:"Success",text:"Logout successful",icon:"success",showConfirmButton:!1,allowOutsideClick:!1}),window.location.href="../login/index.php"):Swal.fire({title:"Error!",text:"Failed to log out. Please try again.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch(error){console.log(error),Swal.fire({title:"Error!",text:"An unexpected error occurred. Please try again.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}}document.querySelectorAll("a[data-page]").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const page=this.getAttribute("data-page");localStorage.setItem("activePage",page),loadPage(page)}))}));